<!DOCTYPE html>

<html lang="en" dir="ltr">
<head>
<meta charset="utf-8" />
<title>Highcharts Widget</title>
<script src="jquery-1.4.2.js" type="text/javascript" charset="utf-8"></script>
<script src="jquery-ui-1.8.custom.js" type="text/javascript" charset="utf-8"></script>
<script src="highcharts.2.1.1.compiled.js" type="text/javascript" charset="utf-8"></script>
<script src="jquery.ui.allychart.js" type="text/javascript" charset="utf-8"></script>


<script type="text/javascript" charset="utf-8">
	
	$(function() {

		
		
		$('#table-based-chart').allyChart({width: 800, height: 400});
		
		var categories = $('#cd-rate-table thead th:gt(0)').map(function() { return $(this).text()  })
			
		$('#table-based-chart').allyChart('setCategories', categories );
		console.log(categories);	
		
		
		$('#highcharts_container').allyChart({width: 800, height: 400});		
		$('#highcharts_container').allyChart('setCategories', categories );
		
		$('#cd-rate-table tbody tr').each(function () {
			var data = $(this).find('td').map(function () {
				return parseFloat($(this).text());
			}).toArray();
			$('#highcharts_container').allyChart('addSeries', $(this).find('th').text(), data);
		});
		
		$('#table-based-chart').allyChart('draw');
		
		
		
	
		$('#highcharts_container').allyChart('draw');
	});
	

	
	
</script>




</head>

<body>
	
<h1>Highcharts Widget</h1>	


<div id="highcharts_container"></div>


<table id="cd-rate-table" summary="A comparison of 1, 2, and 4-year CD rates from three different banks. The best rate is Ally's 4-year CD, at 1.50 APY.">
	<caption>CD Rates</caption>
	<thead>
		<tr>
			<th id="cd-rate-table-company">Company</th>
			<th id="cd-rate-table-12MCD">1 Year</th>
			<th id="cd-rate-table-24MCD">2 Year</th>
			<th id="cd-rate-table-48MCD">4 Year</th>
		</tr>
	</thead>
	<tfoot>
		<tr>
			<td colspan="4">All data is fictional.</td>		
		</tr>
	</tfoot>
	
	<tbody>
		<tr>
			<th id="cd-rate-table-company-ally">Ally</th>
			<td headers="cd-rate-table-company-ally cd-rate-table-12MCD">1.28</td>
			<td headers="cd-rate-table-company-ally cd-rate-table-24MCD">1.38</td>
			<td headers="cd-rate-table-company-ally cd-rate-table-48MCD">1.50</td>
    	</tr>
    	<tr>
    		<th id="cd-rate-table-company-lu">Last Union</th>
    		<td headers="cd-rate-table-company-lu cd-rate-table-12MCD">1.09</td>
    		<td headers="cd-rate-table-company-lu cd-rate-table-24MCD">1.18</td>
    		<td headers="cd-rate-table-company-lu cd-rate-table-48MCD">1.30</td>
    	</tr>
    	<tr>
    		<th id="cd-rate-table-company-bofe">Bank Of Elbonia</th>
    		<td headers="cd-rate-table-company-bofe cd-rate-table-12MCD">1.02</td>
    		<td headers="cd-rate-table-company-bofe cd-rate-table-24MCD">1.35</td>
    		<td headers="cd-rate-table-company-bofe cd-rate-table-48MCD">1.46</td>
		</tr>
	</tbody>	
</table>
	
<div id="table-based-chart"></div>

</body>

</html>